# 상세 기능 개발 작업 목록

> **작성일**: 2025-11-29  
> **목적**: 부분 구현된 기능들을 세부 작업으로 나눠서 개발할 수 있게 정리

---

## 1. 실제 이메일 발송 기능 구현 (FR-013)

### 현재 상태
- ✅ 함수 구조 완료 (`src/lib/utils/email.ts`)
- ❌ 실제 이메일 서비스 연동 미완
- ❌ 이메일 템플릿 미구현

### 세부 작업 목록

#### 1.1 이메일 서비스 선택 및 설정
- [ ] **작업 1.1.1**: 이메일 서비스 선택
  - 옵션 1: Supabase Email (기본 제공)
  - 옵션 2: Resend API
  - 옵션 3: SendGrid API
  - 옵션 4: AWS SES
  - **예상 시간**: 30분
  - **우선순위**: 높음

- [ ] **작업 1.1.2**: 환경 변수 설정
  - 이메일 서비스 API 키 추가 (`.env.local`)
  - `EMAIL_SERVICE_PROVIDER` 변수 추가
  - `EMAIL_FROM_ADDRESS` 변수 추가
  - **예상 시간**: 15분
  - **우선순위**: 높음

#### 1.2 팀 초대 이메일 템플릿 구현
- [ ] **작업 1.2.1**: HTML 이메일 템플릿 작성
  - 파일: `src/lib/utils/email-templates/team-invite.html`
  - 팀 이름, 초대자 이름, 초대 링크 포함
  - 반응형 디자인
  - **예상 시간**: 1시간
  - **우선순위**: 높음

- [ ] **작업 1.2.2**: 텍스트 이메일 템플릿 작성
  - 파일: `src/lib/utils/email-templates/team-invite.txt`
  - HTML 템플릿의 텍스트 버전
  - **예상 시간**: 30분
  - **우선순위**: 중간

- [ ] **작업 1.2.3**: 템플릿 변수 치환 함수 구현
  - 함수: `renderEmailTemplate(template, variables)`
  - 파일: `src/lib/utils/email-templates/render.ts`
  - **예상 시간**: 30분
  - **우선순위**: 높음

#### 1.3 이메일 발송 함수 구현
- [ ] **작업 1.3.1**: Resend API 연동 (또는 선택한 서비스)
  - 함수: `sendEmailViaResend(to, subject, html, text)`
  - 파일: `src/lib/utils/email-providers/resend.ts`
  - 에러 처리 및 재시도 로직
  - **예상 시간**: 1시간
  - **우선순위**: 높음

- [ ] **작업 1.3.2**: `sendTeamInviteEmail` 함수 완성
  - 템플릿 렌더링
  - 이메일 발송 API 호출
  - 에러 처리
  - **예상 시간**: 30분
  - **우선순위**: 높음

#### 1.4 테스트 및 검증
- [ ] **작업 1.4.1**: 개발 환경에서 테스트
  - 테스트 이메일 발송
  - 템플릿 렌더링 확인
  - **예상 시간**: 30분
  - **우선순위**: 중간

- [ ] **작업 1.4.2**: 프로덕션 환경 설정
  - 이메일 서비스 프로덕션 키 설정
  - 도메인 인증 (필요시)
  - **예상 시간**: 1시간
  - **우선순위**: 높음

### 총 예상 시간: 5-6시간

---

## 2. Google OAuth 로그인 연동 (FR-004)

### 현재 상태
- ✅ UI 컴포넌트 존재 (추정)
- ❌ 실제 OAuth 연동 미완
- ❌ Supabase Auth OAuth 설정 미완

### 세부 작업 목록

#### 2.1 Supabase Auth OAuth 설정
- [ ] **작업 2.1.1**: Supabase Dashboard에서 Google OAuth 설정
  - Google Cloud Console에서 OAuth 클라이언트 ID 생성
  - Supabase Dashboard에 클라이언트 ID/Secret 등록
  - 리다이렉트 URL 설정
  - **예상 시간**: 30분
  - **우선순위**: 높음

- [ ] **작업 2.1.2**: 환경 변수 설정
  - `NEXT_PUBLIC_SUPABASE_URL` 확인
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY` 확인
  - **예상 시간**: 10분
  - **우선순위**: 높음

#### 2.2 OAuth 로그인 API 구현
- [ ] **작업 2.2.1**: Google OAuth 로그인 API 엔드포인트 생성
  - 파일: `src/app/api/auth/google/route.ts`
  - Supabase Auth의 `signInWithOAuth` 사용
  - 리다이렉트 URL 처리
  - **예상 시간**: 1시간
  - **우선순위**: 높음

- [ ] **작업 2.2.2**: OAuth 콜백 처리
  - 파일: `src/app/api/auth/callback/route.ts`
  - OAuth 코드를 세션으로 변환
  - 사용자 프로필 자동 생성 (없는 경우)
  - **예상 시간**: 1시간
  - **우선순위**: 높음

#### 2.3 UI 컴포넌트 연동
- [ ] **작업 2.3.1**: 로그인 페이지에 Google 버튼 추가
  - 파일: `src/app/login/page.tsx` (또는 해당 파일)
  - Google 로그인 버튼 클릭 핸들러
  - 로딩 상태 표시
  - **예상 시간**: 30분
  - **우선순위**: 높음

- [ ] **작업 2.3.2**: 회원가입 페이지에도 Google 버튼 추가
  - 파일: `src/app/signup/page.tsx` (또는 해당 파일)
  - **예상 시간**: 15분
  - **우선순위**: 중간

#### 2.4 사용자 프로필 자동 생성
- [ ] **작업 2.4.1**: OAuth 사용자 프로필 자동 생성 로직
  - 파일: `src/app/api/auth/callback/route.ts`에 추가
  - `public.users` 테이블에 자동 생성
  - Google 프로필 정보 (이름, 이메일, 아바타) 매핑
  - **예상 시간**: 30분
  - **우선순위**: 높음

#### 2.5 테스트 및 검증
- [ ] **작업 2.5.1**: 개발 환경에서 테스트
  - Google 계정으로 로그인 테스트
  - 프로필 자동 생성 확인
  - **예상 시간**: 30분
  - **우선순위**: 중간

### 총 예상 시간: 4-5시간

---

## 3. 인앱 알림 생성 로직 구현 (FR-090)

### 현재 상태
- ✅ 알림 조회 API 완료 (`/api/notifications`)
- ✅ 알림 읽음 처리 API 완료
- ❌ 알림 생성 로직 미구현
- ❌ 이벤트 기반 알림 생성 미구현

### 세부 작업 목록

#### 3.1 알림 생성 유틸리티 함수
- [ ] **작업 3.1.1**: 알림 생성 함수 구현
  - 파일: `src/lib/utils/notifications.ts`
  - 함수: `createNotification(userId, type, title, message, targetId?)`
  - `notifications` 테이블에 삽입
  - **예상 시간**: 30분
  - **우선순위**: 높음

- [ ] **작업 3.1.2**: 알림 타입 정의
  - 타입: `NotificationType`
  - 예: `ISSUE_ASSIGNED`, `ISSUE_COMMENTED`, `ISSUE_MENTIONED`, `MEMBER_INVITED` 등
  - **예상 시간**: 15분
  - **우선순위**: 높음

#### 3.2 이슈 관련 알림 생성
- [ ] **작업 3.2.1**: 이슈 할당 시 알림 생성
  - 파일: `src/app/api/issues/[id]/route.ts` (PUT)
  - `assigneeId` 변경 감지
  - 할당된 사용자에게 알림 생성
  - **예상 시간**: 30분
  - **우선순위**: 높음

- [ ] **작업 3.2.2**: 이슈 댓글 작성 시 알림 생성
  - 파일: `src/app/api/issues/[id]/comments/route.ts` (POST)
  - 이슈 작성자에게 알림 생성 (댓글 작성자가 아닌 경우)
  - 이슈 담당자에게 알림 생성 (있는 경우)
  - **예상 시간**: 30분
  - **우선순위**: 높음

- [ ] **작업 3.2.3**: 이슈 멘션 시 알림 생성
  - 파일: `src/app/api/issues/[id]/comments/route.ts` (POST)
  - 댓글 내용에서 `@username` 패턴 감지
  - 멘션된 사용자에게 알림 생성
  - **예상 시간**: 1시간
  - **우선순위**: 중간

- [ ] **작업 3.2.4**: 이슈 상태 변경 시 알림 생성
  - 파일: `src/app/api/issues/[id]/route.ts` (PUT)
  - 상태가 `DONE`으로 변경되면 담당자에게 알림
  - **예상 시간**: 20분
  - **우선순위**: 낮음

#### 3.3 팀 관련 알림 생성
- [ ] **작업 3.3.1**: 팀 멤버 초대 시 알림 생성
  - 파일: `src/app/api/teams/[id]/members/route.ts` (POST)
  - 초대된 사용자에게 알림 생성
  - **예상 시간**: 20분
  - **우선순위**: 중간

- [ ] **작업 3.3.2**: 팀 역할 변경 시 알림 생성
  - 파일: `src/app/api/teams/[id]/members/[memberId]/route.ts` (PUT)
  - 역할이 변경된 사용자에게 알림 생성
  - **예상 시간**: 20분
  - **우선순위**: 낮음

#### 3.4 알림 중복 방지
- [ ] **작업 3.4.1**: 중복 알림 방지 로직
  - 같은 이벤트에 대해 짧은 시간 내 중복 알림 생성 방지
  - 예: 5분 내 같은 이슈에 대한 댓글 알림은 하나만
  - **예상 시간**: 30분
  - **우선순위**: 중간

#### 3.5 알림 링크 생성
- [ ] **작업 3.5.1**: 알림 클릭 시 이동할 링크 생성
  - 이슈 알림: `/issues/[id]`
  - 팀 알림: `/teams/[id]`
  - 프로젝트 알림: `/projects/[id]`
  - **예상 시간**: 30분
  - **우선순위**: 중간

#### 3.6 테스트 및 검증
- [ ] **작업 3.6.1**: 각 이벤트별 알림 생성 테스트
  - 이슈 할당 테스트
  - 댓글 작성 테스트
  - 멘션 테스트
  - **예상 시간**: 1시간
  - **우선순위**: 중간

### 총 예상 시간: 5-6시간

---

## 4. 대시보드 상세 기능 완성 (FR-080, FR-081)

### 현재 상태
- ✅ 기본 통계 API 완료 (`/api/dashboard/stats`)
- ✅ 활동 피드 API 완료 (`/api/dashboard/activities`)
- ❌ 대시보드 페이지 미구현
- ❌ 통계 시각화 미구현
- ❌ 필터링/정렬 기능 미구현

### 세부 작업 목록

#### 4.1 개인 대시보드 페이지 (FR-081)
- [ ] **작업 4.1.1**: 대시보드 페이지 생성
  - 파일: `src/app/dashboard/page.tsx`
  - 레이아웃 구성 (통계 카드, 활동 피드, 차트)
  - **예상 시간**: 1시간
  - **우선순위**: 높음

- [ ] **작업 4.1.2**: 통계 카드 컴포넌트
  - 파일: `src/components/dashboard/StatsCards.tsx`
  - 전체 프로젝트 수, 이슈 수, 진행 중 이슈, 완료된 이슈
  - `StatCard` 컴포넌트 재사용
  - **예상 시간**: 30분
  - **우선순위**: 높음

- [ ] **작업 4.1.3**: 활동 피드 컴포넌트
  - 파일: `src/components/dashboard/ActivityFeed.tsx`
  - 최근 활동 목록 표시
  - 시간 표시 (상대 시간)
  - 링크 클릭 시 해당 페이지로 이동
  - **예상 시간**: 1시간
  - **우선순위**: 높음

#### 4.2 통계 시각화
- [ ] **작업 4.2.1**: 이슈 상태별 분포 차트
  - 파일: `src/components/dashboard/IssueStatusChart.tsx`
  - Pie Chart 또는 Bar Chart
  - 라이브러리: Recharts 또는 Chart.js
  - **예상 시간**: 1시간
  - **우선순위**: 중간

- [ ] **작업 4.2.2**: 이슈 우선순위별 분포 차트
  - 파일: `src/components/dashboard/IssuePriorityChart.tsx`
  - Bar Chart
  - **예상 시간**: 30분
  - **우선순위**: 중간

- [ ] **작업 4.2.3**: 시간별 이슈 생성 추이 차트
  - 파일: `src/components/dashboard/IssueTrendChart.tsx`
  - Line Chart (최근 7일 또는 30일)
  - API 추가 필요: `/api/dashboard/stats/trend`
  - **예상 시간**: 2시간
  - **우선순위**: 낮음

#### 4.3 프로젝트 대시보드 (FR-080)
- [ ] **작업 4.3.1**: 프로젝트 대시보드 페이지 생성
  - 파일: `src/app/projects/[id]/dashboard/page.tsx`
  - 프로젝트별 통계 표시
  - **예상 시간**: 1시간
  - **우선순위**: 중간

- [ ] **작업 4.3.2**: 프로젝트 통계 API 확장
  - 파일: `src/app/api/projects/[id]/stats/route.ts` (신규)
  - 프로젝트별 이슈 통계
  - 멤버별 작업량 통계
  - **예상 시간**: 1시간
  - **우선순위**: 중간

- [ ] **작업 4.3.3**: 프로젝트 멤버별 작업량 차트
  - 파일: `src/components/project/MemberWorkloadChart.tsx`
  - Bar Chart (멤버별 할당된 이슈 수)
  - **예상 시간**: 1시간
  - **우선순위**: 낮음

#### 4.4 필터링 및 정렬
- [ ] **작업 4.4.1**: 기간 필터 추가
  - 최근 7일, 30일, 전체 기간 선택
  - 파일: `src/components/dashboard/DateRangeFilter.tsx`
  - **예상 시간**: 30분
  - **우선순위**: 중간

- [ ] **작업 4.4.2**: 팀/프로젝트 필터 추가
  - 특정 팀 또는 프로젝트만 필터링
  - 파일: `src/components/dashboard/TeamProjectFilter.tsx`
  - **예상 시간**: 1시간
  - **우선순위**: 낮음

- [ ] **작업 4.4.3**: 활동 피드 정렬 옵션
  - 최신순, 오래된순
  - 타입별 필터링 (이슈, 댓글, 프로젝트 등)
  - **예상 시간**: 30분
  - **우선순위**: 낮음

#### 4.5 대시보드 API 확장
- [ ] **작업 4.5.1**: 통계 API에 필터링 파라미터 추가
  - 파일: `src/app/api/dashboard/stats/route.ts`
  - `teamId`, `projectId`, `dateRange` 파라미터
  - **예상 시간**: 1시간
  - **우선순위**: 중간

- [ ] **작업 4.5.2**: 활동 피드 API에 필터링 파라미터 추가
  - 파일: `src/app/api/dashboard/activities/route.ts`
  - `type`, `teamId`, `projectId` 파라미터
  - **예상 시간**: 1시간
  - **우선순위**: 중간

#### 4.6 반응형 디자인
- [ ] **작업 4.6.1**: 모바일 반응형 레이아웃
  - 그리드 레이아웃 조정
  - 차트 크기 조정
  - **예상 시간**: 1시간
  - **우선순위**: 중간

### 총 예상 시간: 12-15시간

---

## 5. 댓글 UI 연동 확인 및 보완 (FR-060~063)

### 현재 상태
- ✅ 댓글 API 완료 (`/api/issues/[id]/comments`)
- ✅ 댓글 수정/삭제 API 완료
- ⚠️ UI 연동 상태 확인 필요

### 세부 작업 목록

#### 5.1 댓글 UI 확인
- [ ] **작업 5.1.1**: 댓글 목록 컴포넌트 확인
  - 파일: `src/components/issue/CommentList.tsx` (또는 해당 파일)
  - API 연동 상태 확인
  - **예상 시간**: 15분
  - **우선순위**: 높음

- [ ] **작업 5.1.2**: 댓글 작성 폼 확인
  - 파일: `src/components/issue/CommentForm.tsx` (또는 해당 파일)
  - API 연동 상태 확인
  - **예상 시간**: 15분
  - **우선순위**: 높음

- [ ] **작업 5.1.3**: 댓글 수정/삭제 UI 확인
  - 파일: `src/components/issue/CommentItem.tsx` (또는 해당 파일)
  - 수정/삭제 버튼 동작 확인
  - **예상 시간**: 15분
  - **우선순위**: 높음

#### 5.2 댓글 UI 보완 (필요시)
- [ ] **작업 5.2.1**: 댓글 작성 폼 개선
  - 마크다운 에디터 추가 (선택)
  - 멘션 기능 추가 (`@username`)
  - 파일 첨부 기능 (선택)
  - **예상 시간**: 2-3시간
  - **우선순위**: 낮음

- [ ] **작업 5.2.2**: 댓글 수정 UI 개선
  - 인라인 편집 모드
  - 취소/저장 버튼
  - **예상 시간**: 30분
  - **우선순위**: 중간

- [ ] **작업 5.2.3**: 댓글 삭제 확인 다이얼로그
  - 삭제 전 확인 다이얼로그 표시
  - `ConfirmDialog` 컴포넌트 사용
  - **예상 시간**: 20분
  - **우선순위**: 중간

#### 5.3 댓글 실시간 업데이트 (선택)
- [ ] **작업 5.3.1**: Supabase Realtime 구독
  - 댓글 추가/수정/삭제 시 실시간 업데이트
  - 파일: `src/hooks/useIssue.ts` 또는 별도 훅
  - **예상 시간**: 1-2시간
  - **우선순위**: 낮음

### 총 예상 시간: 1-2시간 (확인만) 또는 4-6시간 (보완 포함)

---

## 📊 전체 작업 요약

### 우선순위별 작업 그룹

#### 🔴 높음 (즉시 시작)
1. **실제 이메일 발송 기능** (5-6시간)
   - 작업 1.1, 1.2, 1.3
2. **인앱 알림 생성 로직** (5-6시간)
   - 작업 3.1, 3.2.1, 3.2.2
3. **개인 대시보드 기본** (2-3시간)
   - 작업 4.1.1, 4.1.2, 4.1.3

#### 🟡 중간 (다음 단계)
4. **Google OAuth 연동** (4-5시간)
   - 작업 2.1, 2.2, 2.3
5. **대시보드 시각화** (3-4시간)
   - 작업 4.2.1, 4.2.2
6. **댓글 UI 확인 및 보완** (1-2시간)
   - 작업 5.1, 5.2.2, 5.2.3

#### 🟢 낮음 (선택 기능)
7. **대시보드 고급 기능** (6-8시간)
   - 작업 4.3, 4.4, 4.5
8. **댓글 고급 기능** (2-3시간)
   - 작업 5.2.1, 5.3.1

### 총 예상 시간
- **최소 (필수 기능만)**: 12-15시간
- **권장 (중간 우선순위 포함)**: 20-25시간
- **전체 (모든 기능)**: 30-40시간

---

## 🎯 개발 순서 권장사항

### Phase 1: 핵심 기능 (1주)
1. 실제 이메일 발송 기능
2. 인앱 알림 생성 로직 (기본)
3. 개인 대시보드 기본

### Phase 2: 사용자 경험 개선 (1주)
4. Google OAuth 연동
5. 대시보드 시각화
6. 댓글 UI 보완

### Phase 3: 고급 기능 (1주)
7. 대시보드 고급 기능
8. 댓글 고급 기능
9. 알림 고급 기능 (멘션 등)

---

**참고 문서:**
- [MISSING_FEATURES.md](./MISSING_FEATURES.md) - 빠진 기능 요약
- [PRD_FEATURE_COMPARISON.md](./PRD_FEATURE_COMPARISON.md) - 기능 비교 분석

