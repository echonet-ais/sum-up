# Realtime ë¹„í™œì„±í™” ê°€ì´ë“œ

> **ì‘ì„±ì¼**: 2025-11-29  
> **ëª©ì **: Realtime ì—†ì´ ì„œë¹„ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ë²•

---

## âœ… ì™„ë£Œëœ ì‘ì—…

Realtime ì—†ì´ë„ ì„œë¹„ìŠ¤ê°€ ì •ìƒ ì‘ë™í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

### ìˆ˜ì •ëœ íŒŒì¼

1. âœ… `src/lib/utils/realtime.ts` - Realtime í™œì„±í™” ì—¬ë¶€ í™•ì¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
2. âœ… `src/hooks/useRealtimeNotifications.ts` - í™˜ê²½ ë³€ìˆ˜ ì²´í¬ ì¶”ê°€
3. âœ… `src/hooks/useRealtimeComments.ts` - í™˜ê²½ ë³€ìˆ˜ ì²´í¬ ì¶”ê°€
4. âœ… `src/hooks/useRealtimeIssues.ts` - í™˜ê²½ ë³€ìˆ˜ ì²´í¬ ì¶”ê°€

---

## ğŸš€ Realtime ë¹„í™œì„±í™” ë°©ë²•

### ë°©ë²• 1: í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (ê¶Œì¥)

`.env.local` íŒŒì¼ì— ë‹¤ìŒì„ ì¶”ê°€:

```env
# Realtime ë¹„í™œì„±í™”
NEXT_PUBLIC_ENABLE_REALTIME=false
```

ì´ë ‡ê²Œ ì„¤ì •í•˜ë©´:
- âœ… Realtime í›…ë“¤ì´ ìë™ìœ¼ë¡œ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤
- âœ… ì—ëŸ¬ ì—†ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤
- âœ… ê¸°ë³¸ API í˜¸ì¶œë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤

### ë°©ë²• 2: Supabase Dashboardì—ì„œ ë¹„í™œì„±í™”

1. Supabase Dashboard ì ‘ì†
2. Database > Replication ë©”ë‰´ë¡œ ì´ë™
3. ê° í…Œì´ë¸”ì˜ **Enable Realtime** í† ê¸€ì„ **OFF**ë¡œ ì„¤ì •

---

## ğŸ” ì‘ë™ ë°©ì‹

### Realtime í™œì„±í™” ì‹œ (ê¸°ë³¸ê°’)

```
ì‚¬ìš©ì ì•¡ì…˜ â†’ API í˜¸ì¶œ â†’ DB ì—…ë°ì´íŠ¸ â†’ Realtime ì´ë²¤íŠ¸ â†’ ì‹¤ì‹œê°„ UI ì—…ë°ì´íŠ¸
```

### Realtime ë¹„í™œì„±í™” ì‹œ

```
ì‚¬ìš©ì ì•¡ì…˜ â†’ API í˜¸ì¶œ â†’ DB ì—…ë°ì´íŠ¸
                                    â†“
ë‹¤ë¥¸ ì‚¬ìš©ì: ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ ë˜ëŠ” í˜ì´ì§€ ì¬ë°©ë¬¸ â†’ UI ì—…ë°ì´íŠ¸
```

### í˜„ì¬ êµ¬í˜„

ëª¨ë“  ê¸°ëŠ¥ì€ **ê¸°ë³¸ì ìœ¼ë¡œ API í˜¸ì¶œ**ë¡œ ì‘ë™í•©ë‹ˆë‹¤:

- **ì•Œë¦¼**: `useNotifications` â†’ `/api/notifications` API í˜¸ì¶œ
- **ëŒ“ê¸€**: `useIssue` â†’ `/api/issues/[id]/comments` API í˜¸ì¶œ
- **ì´ìŠˆ**: `useIssues` â†’ `/api/issues` API í˜¸ì¶œ

Realtimeì€ **ì¶”ê°€ ê¸°ëŠ¥**ìœ¼ë¡œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

---

## âœ… í™•ì¸ ì‚¬í•­

Realtime ë¹„í™œì„±í™” í›„ í™•ì¸:

1. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰**
   ```bash
   npm run dev
   ```

2. **ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸**
   - ì•Œë¦¼ ëª©ë¡ì´ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
   - ëŒ“ê¸€ ì‘ì„±/ìˆ˜ì •/ì‚­ì œê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸
   - ì´ìŠˆ ëª©ë¡/ì¹¸ë°˜ ë³´ë“œê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸

3. **ë¸Œë¼ìš°ì € ì½˜ì†” í™•ì¸**
   - Realtime ê´€ë ¨ ì—ëŸ¬ê°€ ì—†ëŠ”ì§€ í™•ì¸
   - WebSocket ì—°ê²°ì´ ì‹œë„ë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸

---

## ğŸ’¡ ì°¸ê³ ì‚¬í•­

### Realtime ì—†ì´ë„ ì‘ë™í•˜ëŠ” ì´ìœ 

í˜„ì¬ ì½”ë“œ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

```typescript
// 1. ê¸°ë³¸ ë™ì‘: API í˜¸ì¶œ (í•­ìƒ ì‘ë™)
useEffect(() => {
  fetchNotifications(); // âœ… Realtime ì—†ì´ë„ ì‘ë™
}, []);

// 2. ì¶”ê°€ ê¸°ëŠ¥: Realtime (ì„ íƒì )
useRealtimeNotifications({ ... }); // âš ï¸ í™˜ê²½ ë³€ìˆ˜ë¡œ ì œì–´
```

### ì—…ë°ì´íŠ¸ ë°©ë²•

Realtime ì—†ì„ ë•ŒëŠ”:
- **ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨**: í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ë˜ëŠ” `refetch()` í•¨ìˆ˜ í˜¸ì¶œ
- **ìë™ í´ë§**: í•„ìš”ì‹œ ì£¼ê¸°ì  API í˜¸ì¶œ ì¶”ê°€ ê°€ëŠ¥ (ì˜ˆ: 5ì´ˆë§ˆë‹¤)

### ë‚˜ì¤‘ì— Realtime í™œì„±í™”

ì–¸ì œë“ ì§€ `.env.local`ì—ì„œ `NEXT_PUBLIC_ENABLE_REALTIME=true`ë¡œ ì„¤ì •í•˜ê±°ë‚˜ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì œê±°í•˜ë©´ Realtimeì´ ë‹¤ì‹œ í™œì„±í™”ë©ë‹ˆë‹¤.

---

## ğŸ› ë¬¸ì œ í•´ê²°

### Realtime ê´€ë ¨ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°

1. **í™˜ê²½ ë³€ìˆ˜ í™•ì¸**
   ```env
   NEXT_PUBLIC_ENABLE_REALTIME=false
   ```

2. **ì„œë²„ ì¬ì‹œì‘**
   ```bash
   # ê°œë°œ ì„œë²„ ì¬ì‹œì‘
   npm run dev
   ```

3. **ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ**
   - ê°œë°œì ë„êµ¬ (F12) > Network íƒ­ > "Disable cache" ì²´í¬
   - ë˜ëŠ” í•˜ë“œ ë¦¬í”„ë ˆì‹œ (Ctrl+Shift+R)

---

**ì‘ì„±ì**: AI Assistant  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-29

